{% extends "admissions/application/done.html" %}
{% load filters livewhale_api %}
{% block extra_javascript %}
{{ block.super }}
<!-- Include Editor style. -->
<script src="//www.carthage.edu/static/vendor/jquery/plugins/trumbowyg/trumbowyg.min.js"></script>
<script type='text/javascript' src='https://cdn.jsdelivr.net/npm/froala-editor@2.9.3/js/froala_editor.min.js'></script>
<script src="//www.carthage.edu/themes/korra/assets/fancybox/jquery.fancybox.js"
  type="text/javascript"></script>
<script src="/static/djtinue/js/admissions.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function() {
        {% if form_app.gdpr.value == "Yes" %}
            $('#gdpr').toggle(true);
          {% if form_app.gdpr_cookies.value %}
            $('#id_gdpr_cookies').prop('checked', true);
          {% endif %}
          {% if form_app.gdpr_transfer.value %}
            $('#id_gdpr_transfer').prop('checked', true);
          {% endif %}
          {% if form_app.gdpr_collection.value %}
            $('#id_gdpr_collection').prop('checked', true);
          {% endif %}
        {% endif %}
        $('input[name="gdpr"]').bind('change',function(){
            var $showOrHide = false;
            if ( $(this).val() == "Yes" ) {
                $showOrHide = true;
            }
            $('#gdpr').toggle($showOrHide);
        });
        $('#id_total').attr('readonly', true);
        // toggle college id field
        $('input[name="attended_before"]').bind('change',function(){
            var $showOrHide = false;
            var $attended = $(this).val();
            if ( $attended == "Yes" ) {
                $showOrHide = true;
                if ($discount == "No" || $discount == "None") {
                    update_total(-10);
                    $discount = "Yes";
                }
            }else{
                if ($discount == "Yes") {
                    update_total(10);
                    $discount = "No";
                }
            }
            $('#collegeid').toggle($showOrHide);
        });
        $(".checkbox-toggle").change(function() {
            var $cid = $(this).attr('id');
            var $cred = $(this).attr('data-credit');
            var $prefix = $cid.slice(0, -2);
            var $suffix = $cid.substring($cid.length - 1);
            if($(this).is(":checked")) {
                if ( $suffix == 2 ) {
                    $opposite = $prefix + "01";
                    if($("#" + $opposite).is(":checked")) {
                        $("#" + $opposite).attr("checked",false);
                        update_total(-50 * $cred);
                    }
                    update_total(100 * $cred);
                }else{
                    $opposite = $prefix + "02";
                    if($("#" + $opposite).is(":checked")) {
                        $("#" + $prefix + "02").attr("checked",false);
                        update_total(-100 * $cred);
                    }
                    update_total(50 * $cred);
                }
            }else{
                update_total($suffix * -50 * $cred);
            }
        });
    });
</script>
{% endblock %}
{% block extra_style %}
{{block.super}}
<link href="//www.carthage.edu/static/vendor/jquery/plugins/trumbowyg/trumbowyg.min.css"
  rel="stylesheet" type="text/css" />
<link href="//www.carthage.edu/static/vendor/jquery/plugins/fancybox/jquery.fancybox.css"
  rel="stylesheet" type="text/css" media="screen" />
<style type="text/css" media="screen, projection">
.column2 { padding-left:3%;}
@media only screen and (max-width: 60em) {
   .column2 { padding-left:0;}
}
.note-editor{width:500px;background: #fff; border: solid 1px #ccc;}
#id_reg_fee {color:#800;font-weight:bold;}
ul#id_race li {display:block;}
#session-info > ol li {display:block;margin-bottom:5px;}
#id_security_code, #id_reg_fee {width:100px;}
#id_card_number {width:175px;}
#id_postal_code, #id_date_of_birth, #id_total, #id_social_security_number,
#id_expiration_month, #id_expiration_year {
width:120px; }
#security {color:#000099;float:right;padding:5px;}
li.ctrlHolder div ul li {display:inline; padding-right:3px;}
.cost { font-weight:bold; color:green; }
#page-content-wrap .content h4 {
    font-size: 1em;
    margin-bottom: 0;
    text-transform: none;
}
</style>
{% endblock %}
{% block content %}
<div class="forms-container">
  <form method="post" action="." class="form" id="profile">
    {% csrf_token %}
    {% for hidden in form_ord.hidden_fields %}
      {{ hidden }}
    {% endfor %}
    {% include "includes/required_text.html" %}
    {% if form_proc.errors or form_app.errors or form_ord.errors %}
    <p class="error">
      There were errors with the data submitted, see below.
    </p>
    {% endif %}
    <fieldset class="blockLabels">
      <legend>Contact Information</legend>
      <div class="large-6 medium-12 small-12 clear cf">
        <ol>
        {% with form_app.first_name as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        <li class="form-group ctrlHolder">
          <h3>{{form_app.second_name.label_tag}}</h3>
          <div>{{form_app.second_name}}</div>
        </li>
        {% with form_app.last_name as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        <li class="form-group ctrlHolder">
          <h3>{{form_app.previous_name.label_tag}}</h3>
          <div>{{form_app.previous_name}}</div>
        </li>
        {% with form_app.email as field %}
            {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
      </div>
      <div class="column2 large-6 medium-12 small-12">
        <ol>
        {% with form_app.address1 as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.address2 as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.city as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.state as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.postal_code as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
      </div>
      <div class="large-6 medium-12 small-12 clear cf" style="border-top:2px dotted #cacaca;margin-top:16px;padding-top:12px;">
        <ol>
        {% with form_app.phone as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.phone_secondary as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
      </div>
      <div class="column2 large-6 medium-12 small-12" style="border-top:2px dotted #cacaca;margin-top:16px;padding-top:12px;">
        <ol>
        {% with form_app.phone_tertiary as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
      </div>
    </fieldset>
    <fieldset class="blockLabels">
      <legend>Personal Information</legend>
      <div class="large-6 medium-12 small-12 clear cf">
        <ol>
        {% with form_app.social_security_number as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.birth_date as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.birth_place as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.entry_year as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.fellowships as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
        </div>
      <div class="column2 large-6 medium-12 small-12">
        <ol>
        {% with form_app.gender as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.latinx as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.race as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
      </div>
      <div class="large-12 medium-12 small-12">
        <ol>
        {% with form_app.gdpr as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
      </div>
      <div class="large-12 medium-12 small-12" id="gdpr" style="display:none;">
        <ol>
        <li>
        {% get_lw_content as gdpr_intro blurbs 2630 %}
        {{gdpr_intro.body}}
        </li>
        </ol>
      </div>
    </fieldset>
    <fieldset class="blockLabels">
      <legend>Employment Information</legend>
      <div class="large-6 medium-12 small-12 clear cf">
        <ol>
        {% with form_app.employer as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.position as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.cv as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
      </div>
      <div class="column2 large-6 medium-12 small-12">
        <ol>
        {% with form_app.tuition_reimbursement as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        {% with form_app.military as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
      </div>
    </fieldset>
    <fieldset class="blockLabels">
      <legend>Educational Background</legend>
      <div class="large-6 medium-12 small-12 clear cf">
        <ol>
        {% with form_app.gmat as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
      </div>
      <div class="column2 large-6 medium-12 small-12">
        <ol>
        {% with form_app.gre as field %}
        {% include "form_field.inc.html" %}
        {% endwith %}
        </ol>
      </div>
      <div class="large-12 medium-12 small-12">
        <ol>
        <li>
        {% get_lw_content as personal_statement blurbs 2771 %}
        {{personal_statement.body}}
        </ol>
      </div>
      <div class="large-12 medium-12 small-12">
        <ol>
        <li>
        {% get_lw_content as personal_statement blurbs 2770 %}
        {{personal_statement.body}}
        <div class="large-10 medium-12 small-12">
        {{form_app.personal_statement}}
        </li>
        </ol>
      </div>
    </fieldset>
    <fieldset class="blockLabels">
      <legend>Payment Information</legend>
      <div class="large-12 medium-12 small-12">
            <fieldset class="blockLabels">
            <legend>Credit Card Details</legend>
            {% if form_proc.errors and status %}
                <div style="padding-left:4px;">
                    <p class="notice">
                        The transaction failed.
                        {% if status == "baddata" or status == "decline" %}
                            Error: <strong>{{status}}</strong>
                        {% endif %}
                    </p>
                </div>
            {% endif %}
            <ol>
            {% include "form_field_credit_card.inc.html" %}
            </ol>
            </fieldset>
        </div>
        <div class="column2 large-6 medium-12 small-12">
            <fieldset>
            <legend>Total and Register</legend>
            {% if form_ord.errors %}
                <span class="error-message">
                  {{ form_ord.non_field_errors}}
                </span>
            {% endif %}
            <ol class="fright">
                <li class="ctrlHolder">
                    <h3>
                        <label for="id_or-total">Total Amount due</label>
                    </h3>
                    <div class="required">
                        <span class="cost">$</span>
                        <input type="text" name="total" id="id_total"
                        class="required"
                        value="{{form_ord.total.value|default:10}}">
                    </div>
                </li>
            </ol>
            <ol class="fright">
                <li class="btnHolder">
                    <label for="id_submit">&nbsp;&nbsp;</label>
                    <input type="submit" value="Register" class="button" />
                    <p>
                </li>
            </ol>
            </fieldset>
        </div>
  </form>
</div>
<div style="display:none;">
</div>
{% endblock %}
